<div class="project-section-clean" id="interactive-data">
    <h3>System Performance Data</h3>
    <div id="performance-plot"
        style="width:100%; height:400px; background: var(--surface-color); border-radius: var(--radius-lg); border: 1px solid var(--border-color);">
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Check if Plotly is loaded
            if (typeof Plotly === 'undefined') return;

            // Generate some sample data if none provided
            var trace1 = {
                x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                y: [10, 15, 13, 17, 22, 19, 25, 28, 23, 30],
                mode: 'lines+markers',
                name: 'Power Output (W)',
                line: { shape: 'spline', color: '#3b82f6' },
                type: 'scatter'
            };

            var trace2 = {
                x: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                y: [20, 18, 22, 20, 25, 28, 30, 27, 25, 28],
                mode: 'lines+markers',
                name: 'Efficiency (%)',
                yaxis: 'y2',
                line: { shape: 'spline', color: '#10b981' },
                type: 'scatter'
            };

            var data = [trace1, trace2];

            var layout = {
                title: {
                    text: 'Performance Metrics',
                    font: { color: getComputedStyle(document.documentElement).getPropertyValue('--text-primary').trim() }
                },
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                showlegend: true,
                legend: {
                    orientation: 'h',
                    y: -0.2,
                    font: { color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim() }
                },
                xaxis: {
                    title: 'Time (s)',
                    color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(),
                    gridcolor: getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim()
                },
                yaxis: {
                    title: 'Power (W)',
                    color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(),
                    gridcolor: getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim()
                },
                yaxis2: {
                    title: 'Efficiency (%)',
                    overlaying: 'y',
                    side: 'right',
                    color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(),
                    gridcolor: 'rgba(0,0,0,0)'
                },
                margin: { l: 50, r: 50, b: 50, t: 50, pad: 4 }
            };

            var config = { responsive: true, displayModeBar: false };

            Plotly.newPlot('performance-plot', data, layout, config);

            // Handle theme changes to update plot colors
            const observer = new MutationObserver(function (mutations) {
                mutations.forEach(function (mutation) {
                    if (mutation.attributeName === 'data-theme') {
                        var update = {
                            'title.font.color': getComputedStyle(document.documentElement).getPropertyValue('--text-primary').trim(),
                            'xaxis.color': getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(),
                            'yaxis.color': getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(),
                            'yaxis.gridcolor': getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim(),
                            'yaxis2.color': getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(),
                            'legend.font.color': getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim()
                        };
                        Plotly.relayout('performance-plot', update);
                    }
                });
            });

            observer.observe(document.documentElement, {
                attributes: true,
                attributeFilter: ['data-theme']
            });
        });
    </script>
</div>